// Generated by CoffeeScript 1.6.2
(function() {
  var ExpressChat;

  ExpressChat = {};

  ExpressChat.View = Backbone.View.extend({
    el: "#application",
    events: {
      "click .submit": "sendMessage"
    },
    initialize: function() {
      return _.each(window.messages, function(message) {
        return $("#messages").append("<p>" + message.message + "</p>");
      });
    },
    sendMessage: function(event) {
      var email, message;

      event.preventDefault();
      message = this.$el.find("#message").val();
      email = this.$el.find("#email").val();
      return $.ajax('/message', {
        data: {
          email: email,
          message: message
        },
        type: 'POST',
        success: function(a, b, c) {
          return alert("Success!");
        }
      });
    }
  });

  $(function() {
    return window.application = new ExpressChat.View();
  });

}).call(this);
